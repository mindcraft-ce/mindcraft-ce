<!DOCTYPE html>
<html>
<head>
    <title>mindcraft-ce</title>
    <style>        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            background: #000000;
            color: #e0e0e0;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        #titlebar {
            height: 32px;
            background: #0a0a0a;
            -webkit-app-region: drag;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 8px;
            flex-shrink: 0;
            border-bottom: 1px solid #333;
        }

        #title {
            color: #e0e0e0;
            font-size: 13px;
            margin: auto auto auto 2px;
            letter-spacing: 1px;
        }

        #window-controls {
            display: flex;
            -webkit-app-region: no-drag;
        }

        .window-control {
            width: 40px;
            min-width: 40px;
            height: 32px;
            background: transparent;
            border: none;
            color: #e0e0e0;
            font-size: 13px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s;
        }

        .window-control:hover {
            background: rgba(0,180,216,0.15);
        }

        #close-button:hover {
            background: #e81123;
        }
        .container {
            flex: 1;
            width: 92%;
            height: calc(100% - 120px);
            margin: 10px auto;
            background: #232526;
            padding: 14px 18px;
            border: #5a5a5a 1px solid;
            border-radius: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.18);
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            position: relative;
        }
        .container::-webkit-scrollbar {
            display: none;
        }
        h1 {
            color: #00b4d8;
            margin-bottom: 18px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        /* Settings grid - responsive grid with max 4 columns */
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(4, minmax(320px, 1fr));
            gap: 24px;
            width: 100%;
            margin: 0 auto;
            align-items: start;
        }
        @media (max-width: 1600px) {
            .settings-grid {
                grid-template-columns: repeat(3, minmax(320px, 1fr));
            }
        }
        @media (max-width: 1200px) {
            .settings-grid {
                grid-template-columns: repeat(2, minmax(320px, 1fr));
            }
        }
        @media (max-width: 800px) {
            .settings-grid {
                grid-template-columns: 1fr;
            }
        }
        .setting-group {
            display: block;
            margin-bottom: 0;
            border: none;
            border-radius: 12px;
            background: #000000; /* fallback */
            box-shadow: 0 1px 4px rgba(0,0,0,0.10);
            overflow: hidden;
            transition: box-shadow 0.2s;
        }
        /* Unique, meaningful gradients for each settings group */
        .setting-group:nth-child(1)  { background: linear-gradient(120deg, #000000 0%, #009dbd 100%); } 
        .setting-group:nth-child(2)  { background: linear-gradient(120deg, #000000 0%, #7f43ce 100%); } 
        .setting-group:nth-child(3)  { background: linear-gradient(120deg, #000000 0%, #d67b3e 100%); } 
        .setting-group:nth-child(4)  { background: linear-gradient(120deg, #000000 0%, #c5d116 100%); } 
        .setting-group:nth-child(5)  { background: linear-gradient(120deg, #000000 0%, #881c1c 100%); } 
        .setting-group:nth-child(6)  { background: linear-gradient(120deg, #000000 0%, #1e851b 100%); }
        .setting-group:nth-child(7)  { background: linear-gradient(120deg, #000000 20%,#43cea2 100%); } 
        .setting-group:nth-child(8)  { background: linear-gradient(120deg, #000000 0%, #727272 100%); }
        .setting-group:nth-child(9)  { background: linear-gradient(120deg, #000000 0%, #a63785 100%); }
        .setting-group:nth-child(10) { background: linear-gradient(120deg, #000000 0%, #bd1842 100%); }
        .setting-group:nth-child(11) { background: linear-gradient(120deg, #000000 0%, #846afb 100%); }
        .setting-group:nth-child(12) { background: linear-gradient(120deg, #000000 0%, #11998e 100%); }
        .setting-group summary {
            padding: 13px 18px;
            background: rgba(0,0,0,0.18);
            color: #fff;
            font-size: 1.13em;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
            transition: background 0.2s;
            border-bottom: 1px solid rgba(255,255,255,0.07);
        }
        .setting-group summary:hover {
            background: rgba(0,180,216,0.10);
        }
        .setting-group .settings-content {
            padding: 14px 18px 10px 18px;
        }
        .setting-item {
            margin-bottom: 12px;
        }
        label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #e0e0e0;
            letter-spacing: 0.5px;
        }
        input[type="text"],
        select {
            width: 100%;
            padding: 7px 10px;
            border: 1px solid #404040;
            border-radius: 6px;
            box-sizing: border-box;
            background: #000000;
            color: #e0e0e0;
            font-size: 1em;
            transition: border 0.2s;
        }
        input[type="text"]:focus,
        select:focus {
            outline: none;
            border-color: #00b4d8;
            box-shadow: 0 0 0 2px rgba(0,180,216,0.13);
        }
        input[type="checkbox"] {
            margin-right: 5px;
            accent-color: #00b4d8;
        }
        .button-container {
            margin-top: 18px;
            text-align: center;
            display: flex;
            justify-content: center;
            gap: 10px;
            background: none;
            padding: 0;
            border-radius: 0;
            width: auto;
        }
        button {
            padding: 8px 18px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.2s;
            min-width: 110px;
            background: lightskyblue;
            color: #fff;
        }
        button:hover {
            background: lightblue;
        }
        #startButton {
            background: #2ecc71;
        }
        #startButton:hover {
            background: #129248;
        }
        #stopButton {
            background: #e74c3c;
        }
        #stopButton:hover {
            background: #b63628;
        }
        #resetButton {
            background-color:#555555;
            color:white;
            margin-bottom:30px;
            display:block;
            margin-top: 30px;
            margin-left:auto;
            margin-right:auto;
        }
        #resetButton:hover {
            background: #424242;
        }
        #addProfile, #deleteProfile, #editProfile {
            background: #3b9cd8;
            color: white;
            border: none;
            padding: 8px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            min-width: 110px;
            transition: background 0.2s;
        }
        #addProfile:hover, #deleteProfile:hover, #editProfile:hover {
            background: #1f7aa7;
        }
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }
        .status {
            margin-top: 18px;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
        }
        .success {
            background: linear-gradient(90deg, rgba(0,180,216,0.18) 0%, rgba(67,206,162,0.18) 100%);
            color: #90e0ef;
            border: 1px solid #00b4d8;
        }
        .error {
            background: linear-gradient(90deg, rgba(220,53,69,0.18) 0%, rgba(255,175,123,0.18) 100%);
            color: #ff758f;
            border: 1px solid #dc3545;
        }
        .modal {
            display: none;
            position: fixed;
            overflow: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.4);
        }

        .modal::-webkit-scrollbar {
            display: none;
        }

        .modal-content {
            background: linear-gradient(120deg, #232526 0%, #363636 100%);
            margin: 8% auto;
            padding: 18px 24px;
            border: none;
            width: 90%;
            max-width: 480px;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.18);
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s;
        }
        .close:hover {
            color: #e0e0e0;
            background: rgba(0,180,216,0.10);
        }
        /* Collapsible model fields */
        .collapsible-model-group { display: flex; flex-direction: column; gap: 10px; }
        .collapsible-model { display: flex; flex-direction: column; align-items: stretch; gap: 2px; }
        .collapsible-model label { min-width: 110px; margin-bottom: 2px; }
        .main-model-row { display: flex; align-items: center; width: 100%; gap: 8px; }
        .collapsible-model .main-model { flex: 1; }
        .arrow-btn { background: none; border: none; font-size: 1.2em; cursor: pointer; padding: 0 6px; color: #00b4d8; }
        .arrow-btn:hover { color: #43cea2; }
        .advanced-fields { margin-left: 18px; margin-top: 6px; width: 90%; display: flex; flex-direction: column; align-items: flex-start; }
        .advanced-fields .setting-item { width: 100%; display: flex; align-items: center; justify-content: flex-start; margin-bottom: 4px; }
        .advanced-fields label { min-width: 90px; text-align: left; margin-right: 10px; }
        .advanced-fields input[type="text"] { flex: 1; min-width: 0; margin-left: 18px; }
        #icon {
            width: 12.5px;
            height: 12.5px;
            margin-right: 6px;
            vertical-align: middle;
            margin-bottom: 4px;
        }
        /* Tab bar */
        .tab {
            background: none;
            padding: 5px 0 5px 50px;
            display: flex;
            gap: 5px;
        }
        .tab button {
            -webkit-app-region: no-drag;
            background: none;
            border: none;
            cursor: pointer;
            padding: 7px 22px;
            margin: 0 2px;
            font-size: 1em;
            color: #e0e0e0;
            border-radius: 8px;
            transition: background 0.2s, color 0.2s;
        }
        .tab button:hover {
            background: #181818;
            color: #fff;
        }
        .tab button.active {
            background: #202020;
            color: #fff;
        }
        .tabcontent {
            display: none;
            height: calc(100vh - 50px);
            overflow-y: auto;
            padding: 18px 0 0 0;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .tabcontent::-webkit-scrollbar {
            display: none;
        }
        #home .setting-item, #home .button-container {
            margin-left: auto;
            margin-right: auto;
        }
        #home h1 {
            margin-top: 18px;
            font-size: 50px;
            color: #ffffff;
        }
        #settings .container {
            height: fit-content;
            box-shadow: none;
            background: #2c2d2e6e;
        }
        #settings .settings-grid {
            margin-top: 0;
        }
        #docs {
            padding: 20px;
            background-color: transparent;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #docs::-webkit-scrollbar {
            display: none;
        }

        #json-editor {
            resize: vertical;
            width: 100%;
            height: 100px;
            background-color: #232526;
            border-radius: 10px;
            overflow: auto;
            scrollbar-width: none;
        }

        #json-editor::-webkit-scrollbar {
            display: none;
        }

        .CodeMirror {
        height: 200px;
        border: 1px solid #ccc;
        }
        #json-error {
        color: red;
        font-size: 14px;
        margin-top: 4px;
        }
        #home-button-container {
            background: #393b3c;
            border-radius: 10px;
            padding: 10px;
            width: fit-content;
        }
        #profiles option {
            border-radius: 5px;
        }
        .grid-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 columns */
            gap: 10px;
            padding: 20px;
        }
        .grid-container .grid-item {
            padding: 20px;
            background: #50505057;
            border-radius: 20px;
            border: #6d6d6d 1px solid;
            min-width: 0px;
            min-height: 0px;
        }
        #stolen-smoke-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }
        #chartContainer {
            padding: 0;
            padding-bottom: 20px;
        }
        #homeConsoleOutput {
            left:24px;
            right:24px;
            top:64px;
            bottom:24px;
            background:#181c20cc;
            border-radius:8px;
            padding:18px;
            overflow-y:auto;
            font-family:monospace;
            font-size:1.1em;
            color:#90e0ef;
            box-shadow:0 1px 4px rgba(0,0,0,0.10);
            height: 200px;
            -ms-overflow-style: none;
            scrollbar-width: none;
            text-wrap: balance;
        }
        #homeConsoleOutput::-webkit-scrollbar {
            display: none;
        }
        #consoleOutput {
            position:absolute;
            left:24px;
            right:24px;
            top:64px;
            bottom:24px;
            background:#181c20cc;
            border-radius:8px;
            padding:18px;
            overflow-y:auto;
            font-family:monospace;
            font-size:1.1em;
            color:#90e0ef;
            box-shadow:0 1px 4px rgba(0,0,0,0.10);
            -ms-overflow-style: none;
            scrollbar-width: none;
            text-wrap: balance;
        }
        #consoleOutput::-webkit-scrollbar {
            display: none;
        }
        :root {
            --circle-color: red;
        }

        svg circle {
            fill: var(--circle-color);
        }
    </style>
</head>
<body>
    <div id="titlebar">
        <div style="display: flex;">
            <div style="margin: auto;">
                <img src="icon.svg" alt="icon" id="icon" />
            </div>
            <div id="title">mindcraft-ce</div>
                <div class="tab">

                <script>
                    function openMenu(evt, menuName) { 
                        // Declare all variables
                        var i, tabcontent, tablinks;

                        // Get all elements with class="tabcontent" and hide them
                        tabcontent = document.getElementsByClassName("tabcontent");
                        for (i = 0; i < tabcontent.length; i++) {
                            tabcontent[i].style.display = "none";
                        }

                        // Get all elements with class="tablinks" and remove the class "active"
                        tablinks = document.getElementsByClassName("tablinks");
                        for (i = 0; i < tablinks.length; i++) {
                            tablinks[i].className = tablinks[i].className.replace(" active", "");
                        }

                        // Show the current tab, and add an "active" class to the button that opened the tab
                        document.getElementById(menuName).style.display = "block"; 
                        evt.currentTarget.className += " active";
                    }
                </script>

                <button class="tablinks" onclick="openMenu(event, 'home')" id="homeButton">Home</button>
                <button class="tablinks" onclick="openMenu(event, 'settings')" id="settingsButton">Settings</button>
                <button class="tablinks" onclick="openMenu(event, 'docs')" id="docsButton">Docs</button>
                <button class="tablinks" onclick="openMenu(event, 'console')" id="consoleButton">Console</button>


            </div>
        </div>
        
        <div id="window-controls">
            <button class="window-control" id="minimize-button">─</button>
            <button class="window-control" id="maximize-button">□</button>
            <button class="window-control" id="close-button">✕</button>
        </div>
    </div>
    <canvas id="stolen-smoke-canvas"></canvas>
    <div id="content-area">
        <div id="home" class="tabcontent">
            <div style="text-align: center;">
                <h1>Welcome to mindcraft-ce</h1>
            </div>
            
            <div class="grid-container">
                <div class="grid-item">
                    <div class="setting-item">
                        <label for="host" title="Use 'localhost' or your IP address">Host:</label>
                        <input type="text" id="home_host" />
                    </div>
                    <div class="setting-item">
                        <label for="port">Port:</label>
                        <input type="text" id="home_port" />
                    </div>
                    <div class="button-container" id="home-button-container">
                        <button id="stopButton">Stop</button>
                        <button id="startButton">Start</button>
                    </div>
                </div>
                <div class="grid-item" id="chartContainer">
                    <canvas id="statsChart"></canvas>
                </div>
                <div class="grid-item">
                    <div id="homeConsoleOutput" style="left:24px;right:24px;top:64px;bottom:24px;background:#181c20cc;border-radius:8px;padding:18px;overflow-y:auto;font-family:monospace;font-size:1.1em;color:#90e0ef;box-shadow:0 1px 4px rgba(0,0,0,0.10);"></div>
                </div>
                <div class="grid-item">
                    <div id="loading">
                        <h1>status</h1>
                        <div style="display: flex;">
                            <p style="font-size: large;" id="status-text">server version mismatch</p>
                            <svg width="20" height="20" style="align-self: center; margin: 10px;">
                                <circle id="myCircle" cx="10" cy="12" r="6" />
                            </svg>
                        </div>
                    </div>
                    <iframe id="View" src="" style="display:none; width:100%; height:100%; border:none; border-radius: 20px;"></iframe>
                </div>
            </div>
        </div>
        <div id="settings" class="tabcontent">
            <div class="container" >
                <div class="settings-grid">
                <details class="setting-group" open>
                    <summary>Connection Settings</summary>
                    <div class="settings-content">
                    <div class="setting-item">
                        <label for="host" title="Use 'localhost' or your IP address">Host:</label>
                        <input type="text" id="host" />
                    </div>
                    <div class="setting-item">
                        <label for="port">Port:</label>
                        <input type="text" id="port" />
                    </div>
                    <div class="setting-item">
                        <label for="auth" title="Choose between offline or Microsoft authentication">Authentication:</label>
                        <select id="auth">
                            <option value="offline">Offline</option>
                            <option value="microsoft">Microsoft</option>
                        </select>
                    </div>            </div>
                </details>

                <details class="setting-group">
                    <summary>Mind Server Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="host_mindserver" title="If true, the mindserver will be hosted on this machine">Host Mind Server:</label>
                            <input type="checkbox" id="host_mindserver" />
                    </div>
                    <div class="setting-item">
                        <label for="mindserver_host">Mind Server Host:</label>
                        <input type="text" id="mindserver_host" />
                    </div>
                    <div class="setting-item">
                        <label for="mindserver_port">Mind Server Port:</label>
                        <input type="text" id="mindserver_port" />
                    </div>
                </div>
                </details>

                <details class="setting-group">
                    <summary>Profile Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="base_profile" title="Base profile shared by all bots">Base Profile:</label>
                            <select id="base_profile">
                                <option value="./profiles/defaults/survival.json">Survival</option>
                                <option value="./profiles/defaults/creative.json">Creative</option>
                                <option value="./profiles/defaults/god_mode.json">God Mode</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="profiles" title="Select multiple profiles. Using more than 1 requires messaging each bot individually">Profiles:</label>
                            <select id="profiles" multiple></select>
                        </div>
                        <!-- Add profile button -->
                <div class="setting-item">
                    <div class="button-group">
                        <button id="addProfile">Add Profile</button>
                        <button id="editProfile">Edit Profile</button>
                        <button id="deleteProfile">Delete Profile</button>
                    </div>

                </div>

                <!-- Profile modal -->
                <div id="profileModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2 id="profileModalTitle">Edit Profile</h2>
                        <form id="profileForm">
                            <div class="setting-item">
                                <label for="profileName">Profile Name:</label>
                                <input type="text" id="profileName" required>
                            </div>
                            <!-- Collapsible model fields -->
                            <div class="collapsible-model-group">
                                <div class="collapsible-model">
                                    <div class="main-model-row">
                                        <label for="profileModelModel">Model:</label>
                                        <input type="text" id="profileModelModel" class="main-model" placeholder="e.g. gpt-4.1" required>
                                        <button type="button" class="arrow-btn" data-target="model-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="model-advanced-fields" style="display:none;">
                                        <div class="setting-item"><label for="profileModelApi">API:</label><input type="text" id="profileModelApi" placeholder="e.g. openai, groq, ollama, etc."></div>
                                        <div class="setting-item"><label for="profileModelUrl">URL:</label><input type="text" id="profileModelUrl" placeholder="Custom API URL (optional)"></div>
                                        <div class="setting-item"><label for="profileModelParams">Params (JSON):</label><input type="text" id="profileModelParams" placeholder='{"key": "value"}'></div>
                                    </div>
                                </div>
                                <div class="collapsible-model">
                                    <div class="main-model-row">
                                        <label for="profileEmbeddingModel">Embedding:</label>
                                        <input type="text" id="profileEmbeddingModel" class="main-model" placeholder="e.g. text-embedding-3-large">
                                        <button type="button" class="arrow-btn" data-target="embedding-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="embedding-advanced-fields" style="display:none;">
                                        <div class="setting-item"><label for="profileEmbeddingApi">API:</label><input type="text" id="profileEmbeddingApi" placeholder="e.g. openai, groq, ollama, etc."></div>
                                        <div class="setting-item"><label for="profileEmbeddingUrl">URL:</label><input type="text" id="profileEmbeddingUrl" placeholder="Custom API URL (optional)"></div>
                                        <div class="setting-item"><label for="profileEmbeddingParams">Params (JSON):</label><input type="text" id="profileEmbeddingParams" placeholder='{"key": "value"}'></div>
                                    </div>
                                </div>
                                <div class="collapsible-model">
                                    <div class="main-model-row">
                                        <label for="profileCodeModelModel">Code Model:</label>
                                        <input type="text" id="profileCodeModelModel" class="main-model" placeholder="e.g. gpt-4-code, deepseek-coder, etc.">
                                        <button type="button" class="arrow-btn" data-target="code-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="code-advanced-fields" style="display:none;">
                                        <div class="setting-item"><label for="profileCodeModelApi">API:</label><input type="text" id="profileCodeModelApi" placeholder="e.g. openai, groq, ollama, etc."></div>
                                        <div class="setting-item"><label for="profileCodeModelUrl">URL:</label><input type="text" id="profileCodeModelUrl" placeholder="Custom API URL (optional)"></div>
                                        <div class="setting-item"><label for="profileCodeModelParams">Params (JSON):</label><input type="text" id="profileCodeModelParams" placeholder='{"key": "value"}'></div>
                                    </div>
                                </div>
                                <div class="collapsible-model">
                                    <div class="main-model-row">
                                        <label for="profileVisionModelModel">Vision Model:</label>
                                        <input type="text" id="profileVisionModelModel" class="main-model" placeholder="e.g. gpt-4-vision, gemini-pro-vision, etc.">
                                        <button type="button" class="arrow-btn" data-target="vision-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="vision-advanced-fields" style="display:none;">
                                        <div class="setting-item"><label for="profileVisionModelApi">API:</label><input type="text" id="profileVisionModelApi" placeholder="e.g. openai, groq, ollama, etc."></div>
                                        <div class="setting-item"><label for="profileVisionModelUrl">URL:</label><input type="text" id="profileVisionModelUrl" placeholder="Custom API URL (optional)"></div>
                                        <div class="setting-item"><label for="profileVisionModelParams">Params (JSON):</label><input type="text" id="profileVisionModelParams" placeholder='{"key": "value"}'></div>
                                    </div>
                                </div>
                                <div class="collapsible-model">
                                    <div class="main-model-row">
                                        <label for="profileSpeakModelModel">Speak Model:</label>
                                        <input type="text" id="profileSpeakModelModel" class="main-model" placeholder="e.g. openai-audio, pollinations, etc.">
                                        <button type="button" class="arrow-btn" data-target="speak-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="speak-advanced-fields" style="display:none;">
                                        <div class="setting-item"><label for="profileSpeakModelApi">API:</label><input type="text" id="profileSpeakModelApi" placeholder="e.g. pollinations, openai, etc."></div>
                                        <div class="setting-item"><label for="profileSpeakModelUrl">URL:</label><input type="text" id="profileSpeakModelUrl" placeholder="Custom API URL (optional)"></div>
                                        <div class="setting-item"><label for="profileSpeakModelParams">Params (JSON):</label><input type="text" id="profileSpeakModelParams" placeholder='{"key": "value"}'></div>
                                    </div>
                                </div>
                                <div class="collapsible-model">
                                    <div id="extras" class="main-model-row">
                                        <label for="profileExtras">Extras:</label>
                                        <button type="button" class="arrow-btn" data-target="extras-advanced-fields">&#9654;</button>
                                    </div>
                                    <div class="advanced-fields" id="extras-advanced-fields" style="display:none;">
                                        <div id="json-editor" style="height: 300px; border: 1px solid #ccc;"></div>
                                        <div id="json-error"></div>
                                    </div>
                                </div>
                            <div class="button-container">
                                <button type="button" id="saveProfile">Save</button>
                            </div>
                        </form>
                    </div>
                </div>

                    </div>
                </details>

                <details class="setting-group">
                    <summary>General Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="plugins" title="Add plugins, e.g. pre-installed plugin: Dance">Plugins:</label>
                            <input type="text" id="plugins" />
                        </div>
                        <div class="setting-item">
                            <label for="load_memory" title="Load memory from previous session">Load Memory:</label>
                            <input type="checkbox" id="load_memory" />
                        </div>
                        <div class="setting-item">
                            <label for="init_message" title="Message sent to all bots on spawn">Initial Message:</label>
                            <input type="text" id="init_message" />
                        </div>
                        <div class="setting-item">
                            <label for="only_chat_with" title="Users that bots listen to. If empty, chat publicly">Only Chat With:</label>
                            <input type="text" id="only_chat_with" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Language & Display</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="language" title="Translate to/from this language">Language:</label>
                            <input type="text" id="language" />
                        </div>
                        <div class="setting-item">
                            <label for="show_bot_views" title="Show bot's view in browser">Show Bot Views:</label>
                            <input type="checkbox" id="show_bot_views" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Security Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="allow_insecure_coding" title="Allows newAction command. Enable at own risk">Allow Insecure Coding:</label>
                            <input type="checkbox" id="allow_insecure_coding" />
                        </div>
                        <div class="setting-item">
                            <label for="allow_vision" title="Allows vision model to interpret screenshots">Allow Vision:</label>
                            <input type="checkbox" id="allow_vision" />
                        </div>
                        <div class="setting-item">
                            <label for="vision_mode">Vision Mode:</label>
                            <select id="vision_mode">
                                <option value="off">Off</option>
                                <option value="prompted">Prompted</option>
                                <option value="always">Always</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="blocked_actions" title="Commands to disable and remove from docs">Blocked Actions:</label>
                            <input type="text" id="blocked_actions" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Performance Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="code_timeout_mins" title="Minutes code is allowed to run. -1 for no timeout">Code Timeout (mins):</label>
                            <input type="text" id="code_timeout_mins" />
                        </div>
                        <div class="setting-item">
                            <label for="relevant_docs_count" title="Number of relevant code function docs to select. -1 for all">Relevant Docs Count:</label>
                            <input type="text" id="relevant_docs_count" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Chat Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="max_messages" title="Max number of messages to keep in context">Max Messages:</label>
                            <input type="text" id="max_messages" />
                        </div>
                        <div class="setting-item">
                            <label for="num_examples" title="Number of examples to give to the model">Number of Examples:</label>
                            <input type="text" id="num_examples" />
                        </div>
                        <div class="setting-item">
                            <label for="max_commands" title="Max commands in consecutive responses. -1 for no limit">Max Commands:</label>
                            <input type="text" id="max_commands" />
                        </div>
                        <div class="setting-item">
                            <label for="verbose_commands" title="Show full command syntax">Verbose Commands:</label>
                            <input type="checkbox" id="verbose_commands" />
                        </div>
                        <div class="setting-item">
                            <label for="narrate_behavior" title="Chat simple automatic actions">Narrate Behavior:</label>
                            <input type="checkbox" id="narrate_behavior" />
                        </div>
                        <div class="setting-item">
                            <label for="chat_bot_messages" title="Publicly chat messages to other bots">Chat Bot Messages:</label>
                            <input type="checkbox" id="chat_bot_messages" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Speech Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="speak" title="Enable text-to-speech for all bots">Enable Speech:</label>
                            <input type="checkbox" id="speak" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_transcription" title="Enable speech-to-text transcription">STT Transcription:</label>
                            <input type="checkbox" id="stt_transcription" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_provider" title="Speech-to-text provider">STT Provider:</label>
                            <select id="stt_provider">
                                <option value="pollinations">Pollinations (Free)</option>
                                <option value="groq">Groq (API Key Required)</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label for="stt_username">STT Username:</label>
                            <input type="text" id="stt_username" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_agent_name" title="If empty, sends STT to all bots">STT Agent Name:</label>
                            <input type="text" id="stt_agent_name" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>STT Audio Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="stt_rms_threshold" title="Audio level threshold">RMS Threshold:</label>
                            <input type="text" id="stt_rms_threshold" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_silence_duration" title="Silence duration before stopping (ms)">Silence Duration (ms):</label>
                            <input type="text" id="stt_silence_duration" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_min_audio_duration" title="Minimum audio duration in seconds">Min Audio Duration (s):</label>
                            <input type="text" id="stt_min_audio_duration" step="0.1" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_max_audio_duration" title="Maximum audio duration in seconds">Max Audio Duration (s):</label>
                            <input type="text" id="stt_max_audio_duration" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_debug_audio" title="Enable audio debugging">Debug Audio:</label>
                            <input type="checkbox" id="stt_debug_audio" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_cooldown_ms" title="Minimum time between recordings (ms)">Cooldown (ms):</label>
                            <input type="text" id="stt_cooldown_ms" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_speech_threshold_ratio" title="Speech detection threshold">Speech Threshold Ratio:</label>
                            <input type="text" id="stt_speech_threshold_ratio" step="0.01" />
                        </div>
                        <div class="setting-item">
                            <label for="stt_consecutive_speech_samples" title="Number of consecutive speech samples needed">Consecutive Speech Samples:</label>
                            <input type="text" id="stt_consecutive_speech_samples" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Logging Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="log_normal_data" title="Log all inputs/outputs without reasoning/vision data">Log Normal Data:</label>
                            <input type="checkbox" id="log_normal_data" />
                        </div>
                        <div class="setting-item">
                            <label for="log_reasoning_data" title="Log only reasoning inputs/outputs">Log Reasoning Data:</label>
                            <input type="checkbox" id="log_reasoning_data" />
                        </div>
                        <div class="setting-item">
                            <label for="log_vision_data" title="Log only vision inputs/outputs">Log Vision Data:</label>
                            <input type="checkbox" id="log_vision_data" />
                        </div>
                        <div class="setting-item">
                            <label for="external_logging">Enable External Logging:</label>
                            <input type="checkbox" id="external_logging" />
                        </div>
                    </div>
                </details>

                <details class="setting-group">
                    <summary>Autonomous/Idle Settings</summary>
                    <div class="settings-content">
                        <div class="setting-item">
                            <label for="auto_idle_trigger_enabled">Enable Auto Idle:</label>
                            <input type="checkbox" id="auto_idle_trigger_enabled" />
                        </div>
                        <div class="setting-item">
                            <label for="auto_idle_trigger_timeout_secs">Idle Timeout (secs):</label>
                            <input type="text" id="auto_idle_trigger_timeout_secs" />
                        </div>
                        <div class="setting-item">
                            <label for="auto_idle_trigger_message">Idle Message:</label>
                            <input type="text" id="auto_idle_trigger_message" />
                        </div>
                    </div>
                </details>
                <div id="status" class="status" style="display: none;"></div>
            </div>
            <button id="resetButton">Reset</button>
        </div>
    </div>

    <div id="docs" class="tabcontent">
        <zero-md>
            <template data-append>
                <style>
                :host {
                    background: transparent !important;
                    contain: none; /* Un-disable styling */
                }

                .markdown-body {
                    background: transparent !important;
                    --bgColor-muted: transparent !important;
                    --bgColor-default: #ffffff10 !important;
                }

                .hljs {
                    background: #0000006b;
                    -ms-overflow-style: none;
                    scrollbar-width: none;
                }
                .hljs::-webkit-scrollbar {
                    display: none;
                }
                </style>
            </template>
        </zero-md>
    </div>
    <div id="console" class="tabcontent" style="display:none;position:absolute;left:0;top:32px;right:0;bottom:0;width:100vw;height:calc(100vh - 32px);padding:0;margin:0;background:transparent;z-index:2;">
        <h2 style="color:#00b4d8;margin:24px 0 8px 0;text-align:center;font-size:1.5em;">Console</h2>
        <div id="consoleOutput"></div>
    </div>

    <script type="module" src="dist/renderer.js"></script>
    <script>
            // Get the element with id="homeButton" and click on it
            document.getElementById("homeButton").click();

            // Synchronize Home and Settings fields
            const homeFields = [
                { home: 'home_minecraft_version', settings: 'minecraft_version' },
                { home: 'home_host', settings: 'host' },
                { home: 'home_port', settings: 'port' }
            ];

            homeFields.forEach(({ home, settings }) => {
                const homeInput = document.getElementById(home);
                const settingsInput = document.getElementById(settings);
                if (!homeInput || !settingsInput) return;

                // Update settings when home changes
                homeInput.addEventListener('input', () => {
                    settingsInput.value = homeInput.value;
                });
                // Update home when settings changes
                settingsInput.addEventListener('input', () => {
                    homeInput.value = settingsInput.value;
                });
            });
    </script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.arrow-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const target = document.getElementById(btn.dataset.target);
            if (target.style.display === 'none') {
                target.style.display = 'block';
                btn.innerHTML = '&#9660;'; // Down arrow
            } else {
                target.style.display = 'none';
                btn.innerHTML = '&#9654;'; // Right arrow
            }
        });
    });
});
</script>
<script>
// Console tab logic
const consoleForm = document.getElementById('consoleForm');
const consoleInput = document.getElementById('consoleInput');
const consoleOutput = document.getElementById('consoleOutput');
if (consoleForm && consoleInput && consoleOutput) {
    consoleForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const cmd = consoleInput.value.trim();
        if (!cmd) return;
        // For now, just echo the command. You can hook this to backend logic.
        const out = document.createElement('div');
        out.textContent = '> ' + cmd;
        out.style.color = '#fff';
        consoleOutput.appendChild(out);
        consoleInput.value = '';
        consoleOutput.scrollTop = consoleOutput.scrollHeight;
    });
}
</script>
</body>
</html>
